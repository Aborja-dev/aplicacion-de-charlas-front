---
import PrivateHeader from "../../components/PrivateHeader.astro";
import TalksTable from "../../components/TalksTable.astro"
import Layout from "../../layouts/layout.astro";
import {getUserTalksRequest } from "../../lib/gateway";
import type { ITalk } from "../../lib/types";
const sesion = Astro.cookies.get("user_session");
const sesionData = JSON.parse(sesion?.value || "{}");
console.log(sesionData);
if (!sesionData) {
    return Astro.redirect("/");
}
const userID = sesionData.userId.toString();
const data = await getUserTalksRequest(userID);
const talks: ITalk[] = data
console.log(talks);
---
<Layout>
    <PrivateHeader />
    <TalksTable talks={talks} />
</Layout>
