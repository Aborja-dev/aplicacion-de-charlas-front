---
import PrivateHeader from "../../components/PrivateHeader.astro";
import TalksTable from "../../components/TalksTable.astro"
import type { ForTalkOutput } from "../../domain/api";
import Layout from "../../layouts/layout.astro";
import {getUserTalksRequest } from "../../lib/gateway";
import type { ITalk } from "../../lib/types";
const sesion = Astro.cookies.get("user_session");
const sesionData = JSON.parse(sesion?.value || "{}");
console.log("sesionData", sesionData);
if (!sesionData) {
    return Astro.redirect("/");
}
const data = await getUserTalksRequest(sesionData.token);
const talks: ForTalkOutput[] = data
---
<Layout>
    <PrivateHeader />
    <div class="mx-auto w-4/5">
        <TalksTable talks={talks} />
    </div>
</Layout>
